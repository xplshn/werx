<!DOCTYPE html>
<html lang="{{ .Site.LanguageCode | default "en-us" }}">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <link rel="icon" type="image/x-icon" href="{{ "favicon.ico" | relURL }}">
  <link rel="manifest" href="{{ "site.webmanifest" | relURL }}">
  <meta name="apple-mobile-web-app-title" content="{{ .Site.Title }}">
  <meta name="application-name" content="{{ .Site.Title }}">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="theme-color" content="#ffffff">

  <style>
    body{font-family:monospace;}
    html{cursor: url('{{ "/img/9cursor.png" | absURL }}'), auto;}
  </style>

  <title>{{ .Title }}</title>
  {{ with .Site.Params.description }}<meta name="description" content="{{ . }}">{{ end }}
  {{ with .Site.Params.author }}<meta name="author" content="{{ . }}">{{ end }}
  <link rel="stylesheet" href="{{ "css/style.css" | absURL }}">
  <link rel="stylesheet" href="{{ "css/mermaid.css" | absURL }}">
  {{ range .Site.Params.customCSS -}}
    <link rel="stylesheet" href="{{ . | relURL }}?rnd={{ now.Unix }}">
  {{- end }}
  {{ with .OutputFormats.Get "RSS" -}}
    {{ printf `<link rel="%s" type="%s" href="%s" title="%s">` .Rel .MediaType.Type .RelPermalink $.Site.Title | safeHTML }}
  {{- end }}
  <!-- SerenityOS Emoji -->
  <link href='{{ "/css/SerenityOS-Emoji.css" | absURL }}' rel="stylesheet" type="text/css">
  <!-- Automagically centers images. Original Author Yihui Xie: https://yihui.name -->
  <script>
  (function() {
    function center_el(tagName) {
      var tags = document.getElementsByTagName(tagName), i, tag;
      for (i = 0; i < tags.length; i++) {
        tag = tags[i];
        var parent = tag.parentElement;
        // center an image if it is the only element of its parent
        if (parent.childNodes.length === 1) {
          // if there is a link on image, check grandparent
          if (parent.nodeName === 'A') {
            parent = parent.parentElement;
            if (parent.childNodes.length != 1) continue;
          }
          if (parent.nodeName === 'P') parent.style.textAlign = 'center';
        }
      }
    }
    var tagNames = ['img', 'embed', 'object'];
    for (var i = 0; i < tagNames.length; i++) {
      center_el(tagNames[i]);
    }
  })();
  </script>
</head>
<body>
  {{ partial "header.html" . }}
  {{ partial "sidebar.html" . }}
  <article id="main">
    {{ block "main" . }}{{ end }}
  </article>
  {{ partial "footer.html" . }}

  {{ if .Store.Get "hasMermaid" }}
  	<script type="module">
  	  import mermaid from '{{ "/js/mermaid.min.js" | absURL }}';
  	  mermaid.initialize({ startOnLoad: true });
  	</script>
  {{ end }}
</body>
</html>
